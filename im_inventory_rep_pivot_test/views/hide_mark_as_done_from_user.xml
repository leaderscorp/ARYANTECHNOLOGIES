<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Inherit Form View to Modify it -->
        <record id="hide_button_from_user" model="ir.ui.view">
            <field name="name">hide_button_from_user</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <field name="hide_button" invisible="True"/>
                    <field name="env_user" invisible="True"/>
                </xpath>

                <xpath expr="//header/button[@name='action_confirm']" position="attributes">
                    <attribute name="attrs">{'invisible': [
                        '|',('show_mark_as_todo', '=', False),
                        '|', ('env_user', '=', 11),
                        '&amp;', ('hide_button', '=', True),('picking_type_id', '=', 44)
                        ]}
                    </attribute>
                </xpath>

                <xpath expr="//header/button[@name='button_validate'][1]" position="attributes">
                    <attribute name="attrs">{'invisible': [
                        '|', ('env_user', '=', 11),
                        '|', ('state', 'in', ('waiting','confirmed')), ('show_validate', '=', False)
                        ]}
                    </attribute>
                </xpath>

                <xpath expr="//header/button[@name='button_validate'][2]" position="attributes">
                    <attribute name="attrs">{'invisible': [
                        '|', ('env_user', '=', 11),
                        '|', ('state', 'not in', ('waiting','confirmed')), ('show_validate', '=', False)
                        ]}
                    </attribute>
                </xpath>



            </field>
        </record>


    </data>
</odoo>
